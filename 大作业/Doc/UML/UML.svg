<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: G Pages: 1 -->
<svg width="1496pt" height="2730pt"
 viewBox="0.00 0.00 1496.48 2730.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 2726)">
<title>G</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-2726 1492.4847,-2726 1492.4847,4 -4,4"/>
<!-- A0 -->
<g id="node1" class="node">
<title>A0</title>
<polygon fill="none" stroke="#000000" points="139,-556 139,-588 761,-588 761,-556 139,-556"/>
<text text-anchor="start" x="437.218" y="-569" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">BigInt</text>
<polygon fill="none" stroke="#000000" points="139,-440 139,-556 761,-556 761,-440 139,-440"/>
<text text-anchor="start" x="296.356" y="-537" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">&#45;number:vector&lt;uint64_t&gt; // 储存大数，逆序存储，每64位为一个块</text>
<text text-anchor="start" x="417.494" y="-525" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000"> &#45;bit:int // 数位</text>
<text text-anchor="start" x="334.9815" y="-513" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">&#45;inverseComputed:bool // 是否求逆(用于乘方运算)</text>
<text text-anchor="start" x="296.352" y="-501" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">&#45;numberInverse:vector&lt;uint64_t&gt; // 储存求逆后的大数(用于乘方运算)</text>
<text text-anchor="start" x="391.097" y="-489" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">/*以下定义几个常用数*/&lt;/u&gt;</text>
<text text-anchor="start" x="411.233" y="-477" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+zero:BigInt*&lt;/u&gt;</text>
<text text-anchor="start" x="405.944" y="-465" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">&lt;u&gt;+one:BigInt&lt;/u&gt;</text>
<text text-anchor="start" x="406.504" y="-453" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">&lt;u&gt;+two:BigInt&lt;/u&gt;</text>
<polygon fill="none" stroke="#000000" points="139,0 139,-440 761,-440 761,0 139,0"/>
<text text-anchor="start" x="250.443" y="-421" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">&lt;u&gt;+Shrink(vec,vector&lt;uint64_t&gt;):int // 进位函数，同时去掉末尾的0，返回位数&lt;/u&gt;</text>
<text text-anchor="start" x="148.8875" y="-409" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">/*以下定义默认构造函数，复制构造函数，用字符串初始化的构造函数，用向量初始化的构造函数，用整数初始化的构造函数*/</text>
<text text-anchor="start" x="430.9695" y="-397" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+BigInt()</text>
<text text-anchor="start" x="399.847" y="-385" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+BigInt(bigInt:BigInt &amp;)</text>
<text text-anchor="start" x="414.8575" y="-373" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+BigInt(s:string)</text>
<text text-anchor="start" x="417.0775" y="-361" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+BigInt(x:int &amp;)</text>
<text text-anchor="start" x="357.6285" y="-349" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+ToString():string // 将大数转换为字符串</text>
<text text-anchor="start" x="370.8135" y="-337" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">/*下面重载大数相关的运算符*/</text>
<text text-anchor="start" x="348.1725" y="-325" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+&gt;&gt;(input:istream &amp;, bigInt:BigInt &amp;):istream &amp;</text>
<text text-anchor="start" x="363.1645" y="-313" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+&lt;&lt;(output : ostream &amp;, bigInt:BigInt &amp;)</text>
<text text-anchor="start" x="402.2065" y="-301" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+!=(bigInt:BigInt):bool</text>
<text text-anchor="start" x="400.6765" y="-289" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+==(bigInt:BigInt):bool</text>
<text text-anchor="start" x="403.596" y="-277" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+&lt;(bigInt:BigInt):bool</text>
<text text-anchor="start" x="403.596" y="-265" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+&gt;(bigInt:BigInt):bool</text>
<text text-anchor="start" x="349.9635" y="-253" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+&lt;=(bigInt:BigInt):bool:+&gt;=(bigInt:BigInt):bool</text>
<text text-anchor="start" x="387.8945" y="-241" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">++=(bigInt:BigInt &amp;):BigInt &amp;</text>
<text text-anchor="start" x="395.538" y="-229" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">++(bigInt:BigInt &amp;):BigInt</text>
<text text-anchor="start" x="389.1495" y="-217" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+&#45;=(bigInt:BigInt &amp;):BigInt &amp;</text>
<text text-anchor="start" x="396.793" y="-205" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+&#45;(bigInt:BigInt &amp;):BigInt</text>
<text text-anchor="start" x="390.259" y="-193" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+*=(bigInt:BigInt &amp;):BigInt&amp;</text>
<text text-anchor="start" x="396.513" y="-181" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+*(bigInt:BigInt &amp;):BigInt</text>
<text text-anchor="start" x="389.4245" y="-169" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+/=(bigInt:BigInt &amp;):BigInt &amp;</text>
<text text-anchor="start" x="397.068" y="-157" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+/(bigInt:BigInt &amp;):BigInt</text>
<text text-anchor="start" x="412.9085" y="-145" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+%(bigInt):BigInt</text>
<text text-anchor="start" x="386.3695" y="-133" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+%=(bigInt:BigInt &amp;):BigInt &amp;</text>
<text text-anchor="start" x="287.736" y="-121" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">&lt;u&gt;+PowMod(a:BigInt &amp;, e:BigInt &amp;, mod:BigInt &amp;):BigInt // a ^ e % n&lt;/u&gt;</text>
<text text-anchor="start" x="335.3875" y="-109" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">&lt;u&gt;+ToInt(s:string):BigInt // 将字符串转为大数&lt;/u&gt;</text>
<text text-anchor="start" x="382.2085" y="-97" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">&#45;GetBit():int // 返回大数的位数</text>
<text text-anchor="start" x="310.1735" y="-85" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">&#45;DecToBin(s:string):string // 将输入的十进制串转为二进制串</text>
<text text-anchor="start" x="350.075" y="-73" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">&#45;SetBin(s:string):void // 用二进制串构造大数</text>
<text text-anchor="start" x="229.6885" y="-61" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">&#45;DivMod(_a:BigInt &amp;, _b:BigInt &amp;):pair&lt;BigInt, BigInt&gt; // 带余除法，数对前一项为商后一项为余数</text>
<text text-anchor="start" x="258.3085" y="-49" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">&#45;GetResidualWithInverse(a:BigInt &amp;, inv:BigInt &amp;):BigInt // 计算定点逆(用于乘方运算)</text>
<text text-anchor="start" x="325.8195" y="-37" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">&#45;Reverse(length:int):BigInt // 翻转大数(用于乘方运算)</text>
<text text-anchor="start" x="307.1935" y="-25" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">&#45;RightShift(length:int):BigInt // 返回右移后的大数(用于乘方运算)</text>
<text text-anchor="start" x="325.264" y="-13" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">&#45;ComputeInverse():void // 计算大数的逆(用于乘方运算)</text>
</g>
<!-- A0&#45;&gt;A0 -->
<g id="edge14" class="edge">
<title>A0&#45;&gt;A0</title>
<path fill="none" stroke="#000000" d="M767.9325,-338.6388C775.0453,-326.0671 779,-311.1875 779,-294 779,-276.125 774.7226,-260.7462 767.0639,-247.8636"/>
<polygon fill="none" stroke="#000000" points="767.9039,-338.6817 767.8931,-345.8928 761.2325,-348.6563 761.2433,-341.4451 767.9039,-338.6817"/>
<polygon fill="#000000" stroke="#000000" points="761.2325,-239.3438 770.5942,-245.0542 764.0566,-243.4698 766.8807,-247.5959 766.8807,-247.5959 766.8807,-247.5959 764.0566,-243.4698 763.1672,-250.1376 761.2325,-239.3438 761.2325,-239.3438"/>
<text text-anchor="middle" x="764.284" y="-325.8904" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">zero, one, two</text>
</g>
<!-- A1 -->
<g id="node2" class="node">
<title>A1</title>
<polygon fill="none" stroke="#000000" points="578,-1798 578,-1830 1133,-1830 1133,-1798 578,-1798"/>
<text text-anchor="start" x="843.2765" y="-1811" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">Block</text>
<polygon fill="none" stroke="#000000" points="578,-1646 578,-1798 1133,-1798 1133,-1646 578,-1646"/>
<text text-anchor="start" x="803.188" y="-1779" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">&#45;version:int//当前版本号</text>
<text text-anchor="start" x="770.492" y="-1767" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">&#45;preBlockHash:string // 前一个区块的哈希</text>
<text text-anchor="start" x="766.598" y="-1755" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">&#45;merkleRoot:string // 梅克尔树树根哈希值</text>
<text text-anchor="start" x="806.1425" y="-1743" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">&#45;time:time_t // 时间戳</text>
<text text-anchor="start" x="782.991" y="-1731" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">&#45;diffcultyTarget:string // 难度值</text>
<text text-anchor="start" x="814.1005" y="-1719" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">&#45;height:int // 高度</text>
<text text-anchor="start" x="789.011" y="-1707" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">&#45;nonce:int // 工作量证明常数</text>
<text text-anchor="start" x="751.036" y="-1695" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">&#45;numTransactions:uint64_int // 区块中的交易数量</text>
<text text-anchor="start" x="761.8685" y="-1683" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">&#45;merkleTreeRoot:node* //梅克尔树树根指针</text>
<text text-anchor="start" x="760.197" y="-1671" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">&#45;merkleTree:vector&lt;node*&gt; // 梅克尔树指针</text>
<text text-anchor="start" x="780.6285" y="-1659" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+preBlock:Block* // 上一个区块指针</text>
<polygon fill="none" stroke="#000000" points="578,-1422 578,-1646 1133,-1646 1133,-1422 578,-1422"/>
<text text-anchor="start" x="823.411" y="-1627" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+Pack():void //</text>
<text text-anchor="start" x="780.2055" y="-1615" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">将通过验证的区块打包进区块链</text>
<text text-anchor="start" x="798.6815" y="-1603" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+Block() // 默认构造函</text>
<text text-anchor="start" x="687.544" y="-1591" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000"> +Block(_nonce:int, difficulty:string, vec:vector&lt;Transaction&gt; &amp;) // 构造函数</text>
<text text-anchor="start" x="777.1025" y="-1579" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000"> +Block(p:Block &amp;) // 复制构造函数</text>
<text text-anchor="start" x="724.7915" y="-1567" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+SetDifficultyTarget(difficulty:string):void // 设置难度值</text>
<text text-anchor="start" x="733.5795" y="-1555" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+SetNonce(_nonce:int):void // 设置工作量证明常数</text>
<text text-anchor="start" x="790.541" y="-1543" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+GetHeight():int // 获得高度</text>
<text text-anchor="start" x="774.43" y="-1531" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000"> +GetHash():string // 获得区块哈希值</text>
<text text-anchor="start" x="792.296" y="-1519" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+Show():void // 打印区块信息</text>
<text text-anchor="start" x="652.1665" y="-1507" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+AddTransactionSet(add:vector&lt;Transaction&gt; &amp;):bool // 向区块中添加交易，若成功返回true</text>
<text text-anchor="start" x="649.1125" y="-1495" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+GetTransactionSet(result:vector&lt;Transaction&gt; &amp;):bool // 获得区块内的交易，若成功返回true</text>
<text text-anchor="start" x="682.8085" y="-1483" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+&lt;u&gt;CreateTree(vec:vector&lt;Transaction&gt; &amp;):bool // 根据交易构造梅克尔树&lt;/u&gt;</text>
<text text-anchor="start" x="587.52" y="-1471" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+CreateTreeCheck():pair&lt;bool, node*&gt; // 检查梅克尔树与交易是否一致，若不一致返回false与出错交易(假设只有一处出错)</text>
<text text-anchor="start" x="766.652" y="-1459" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+GetTreeRoot():string // 获得树根哈希值</text>
<text text-anchor="start" x="766.642" y="-1447" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+GetTreeRootpt():node* // 获得树根指针</text>
<text text-anchor="start" x="772.566" y="-1435" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+ShowTree():void // 打印梅克尔树信息</text>
</g>
<!-- A2 -->
<g id="node3" class="node">
<title>A2</title>
<polygon fill="none" stroke="#000000" points="825,-1222 825,-1266 1009,-1266 1009,-1222 825,-1222"/>
<text text-anchor="start" x="892.2645" y="-1247" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">&lt;&lt;Struct&gt;&gt;</text>
<text text-anchor="start" x="905.882" y="-1235" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">node</text>
<polygon fill="none" stroke="#000000" points="825,-1130 825,-1222 1009,-1222 1009,-1130 825,-1130"/>
<text text-anchor="start" x="899.355" y="-1203" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+id:int //</text>
<text text-anchor="start" x="894.6905" y="-1191" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">节点编号</text>
<text text-anchor="start" x="834.8985" y="-1179" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+transactionHash:string // 交易哈希值</text>
<text text-anchor="start" x="851.757" y="-1167" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+leftTree:node* // 左子树指针</text>
<text text-anchor="start" x="863.5145" y="-1155" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+rightTree // 右子树指针</text>
<text text-anchor="start" x="854.986" y="-1143" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+father:node* // 父节点指针</text>
</g>
<!-- A1&#45;&gt;A2 -->
<g id="edge1" class="edge">
<title>A1&#45;&gt;A2</title>
<path fill="none" stroke="#000000" d="M884.5927,-1421.7148C892.1063,-1369.8468 899.7304,-1317.2162 905.6945,-1276.0446"/>
<polygon fill="#000000" stroke="#000000" points="907.1349,-1266.101 910.1547,-1276.6429 906.418,-1271.0494 905.7012,-1275.9977 905.7012,-1275.9977 905.7012,-1275.9977 906.418,-1271.0494 901.2477,-1275.3526 907.1349,-1266.101 907.1349,-1266.101"/>
</g>
<!-- A3 -->
<g id="node4" class="node">
<title>A3</title>
<polygon fill="none" stroke="#000000" points="478,-1304 478,-1336 807,-1336 807,-1304 478,-1304"/>
<text text-anchor="start" x="629.4425" y="-1317" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">Chain</text>
<polygon fill="none" stroke="#000000" points="478,-1200 478,-1304 807,-1304 807,-1200 478,-1200"/>
<text text-anchor="start" x="609.1675" y="-1285" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">&#45;difficulty:string</text>
<text text-anchor="start" x="639.721" y="-1273" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">//</text>
<text text-anchor="start" x="602.77" y="-1261" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">区块链的难度值</text>
<text text-anchor="start" x="616.9395" y="-1249" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">&#45;end:Block*</text>
<text text-anchor="start" x="639.721" y="-1237" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">//</text>
<text text-anchor="start" x="603.602" y="-1225" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">区块链尾区块指针</text>
<text text-anchor="start" x="555.8195" y="-1213" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">&#45;blocks:vector&lt;Block&gt; // 区块链中的区块</text>
<polygon fill="none" stroke="#000000" points="478,-1060 478,-1200 807,-1200 807,-1060 478,-1060"/>
<text text-anchor="start" x="619.0255" y="-1181" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+Chain() //</text>
<text text-anchor="start" x="605.543" y="-1169" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">默认构造函数</text>
<text text-anchor="start" x="563.824" y="-1157" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+Chain(p:Chain &amp;) // 复制构造函数</text>
<text text-anchor="start" x="539.4805" y="-1145" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+GetLastBlock():Block* // 获得最后一个区块指针</text>
<text text-anchor="start" x="535.318" y="-1133" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+AddBlock(newBlock:Block*):void // 添加一个区块</text>
<text text-anchor="start" x="487.534" y="-1121" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+SetDifficulty(difficultyTarget:string):void // 设置所有矿工的难度值</text>
<text text-anchor="start" x="563.098" y="-1109" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+GetDifficulty:string // 获得难度值</text>
<text text-anchor="start" x="522.6535" y="-1097" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">&lt;u&gt;GetCoinBaseIndex():string // 获得创始区块地址&lt;/u&gt;</text>
<text text-anchor="start" x="499.469" y="-1085" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+GetTransaction():vector&lt;Transaction&gt; // 获得区块链中的所有交易</text>
<text text-anchor="start" x="589.16" y="-1073" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">Print():void // 打印区块链</text>
</g>
<!-- A1&#45;&gt;A3 -->
<g id="edge3" class="edge">
<title>A1&#45;&gt;A3</title>
<path fill="none" stroke="#000000" d="M746.5909,-1421.7148C733.6863,-1395.8507 720.8191,-1369.7971 708.7434,-1345.0691"/>
<polygon fill="#000000" stroke="#000000" points="704.3316,-1336.0216 712.7593,-1343.0377 706.5231,-1340.5158 708.7146,-1345.01 708.7146,-1345.01 708.7146,-1345.01 706.5231,-1340.5158 704.6698,-1346.9823 704.3316,-1336.0216 704.3316,-1336.0216"/>
<text text-anchor="middle" x="719.8734" y="-1345.6095" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">end</text>
</g>
<!-- A6 -->
<g id="node7" class="node">
<title>A6</title>
<polygon fill="none" stroke="#000000" points="1045,-1340 1045,-1372 1397,-1372 1397,-1340 1045,-1340"/>
<text text-anchor="start" x="1194.8845" y="-1353" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">Transaction</text>
<polygon fill="none" stroke="#000000" points="1045,-1128 1045,-1340 1397,-1340 1397,-1128 1045,-1128"/>
<text text-anchor="start" x="1198.3555" y="-1321" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+txID:int //</text>
<text text-anchor="start" x="1200.6355" y="-1309" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">交易编号</text>
<text text-anchor="start" x="1190.8565" y="-1297" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+_time:time_t</text>
<text text-anchor="start" x="1218.221" y="-1285" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">//</text>
<text text-anchor="start" x="1203.3095" y="-1273" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">时间戳</text>
<text text-anchor="start" x="1187.792" y="-1261" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+intput:TxInput</text>
<text text-anchor="start" x="1218.221" y="-1249" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">//</text>
<text text-anchor="start" x="1201.826" y="-1237" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">交易输入</text>
<text text-anchor="start" x="1158.6155" y="-1225" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+output:TxOutput // 交易输出</text>
<text text-anchor="start" x="1153.342" y="-1213" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+senderAdr:string // 发出者地址</text>
<text text-anchor="start" x="1148.4375" y="-1201" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+receiverAdr:string // 接收者地址</text>
<text text-anchor="start" x="1139.539" y="-1189" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">&lt;u&gt;+mineReward:int // 挖矿收益&lt;/u&gt;</text>
<text text-anchor="start" x="1156.1065" y="-1177" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">&lt;u&gt;+cnt:int // 交易总数量&lt;/u&gt;</text>
<text text-anchor="start" x="1129.439" y="-1165" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">&lt;u&gt;+txPool:vector&lt;Transaction&gt; // 交易池</text>
<text text-anchor="start" x="1103.874" y="-1153" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">&lt;u&gt;+toBePackedTx:vector&lt;Transaction&gt; // 待打包交易</text>
<text text-anchor="start" x="1112.962" y="-1141" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">&lt;u&gt;+packedTx:vector&lt;Transaction&gt; // 已打包交易</text>
<polygon fill="none" stroke="#000000" points="1045,-1024 1045,-1128 1397,-1128 1397,-1024 1045,-1024"/>
<text text-anchor="start" x="1054.722" y="-1109" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+Transaction(_sender:string, _receiverAdr:string) // 构造函数(非奖励交易)</text>
<text text-anchor="start" x="1095.8435" y="-1097" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+Transaction(_receiverAdr:string) // 构造函数(奖励交易)</text>
<text text-anchor="start" x="1158.351" y="-1085" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+Show():void // 打印交易信息</text>
<text text-anchor="start" x="1150.21" y="-1073" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+SetID():void // 设置交易编号</text>
<text text-anchor="start" x="1118.611" y="-1061" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+IsCoinbase():bool // 判断是否为系统奖励交易</text>
<text text-anchor="start" x="1167.0735" y="-1049" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+GetID():int // 获得编号</text>
<text text-anchor="start" x="1144.099" y="-1037" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+GetTxHash():string // 获得交易哈希</text>
</g>
<!-- A1&#45;&gt;A6 -->
<g id="edge11" class="edge">
<title>A1&#45;&gt;A6</title>
<path fill="none" stroke="#000000" d="M1037.6647,-1412.3921C1046.9339,-1401.5527 1056.2043,-1390.7119 1065.3807,-1379.981"/>
<polygon fill="none" stroke="#000000" points="1037.4915,-1412.5947 1036.632,-1419.7544 1029.6925,-1421.7148 1030.5519,-1414.5551 1037.4915,-1412.5947"/>
<polygon fill="#000000" stroke="#000000" points="1072.0446,-1372.1883 1068.9655,-1382.713 1068.795,-1375.9883 1065.5455,-1379.7884 1065.5455,-1379.7884 1065.5455,-1379.7884 1068.795,-1375.9883 1062.1254,-1376.8637 1072.0446,-1372.1883 1072.0446,-1372.1883"/>
</g>
<!-- A2&#45;&gt;A2 -->
<g id="edge15" class="edge">
<title>A2&#45;&gt;A2</title>
<path fill="none" stroke="#000000" d="M966.2042,-1266.0045C997.2699,-1283.0666 1027,-1260.3984 1027,-1198 1027,-1141.9389 1003.0021,-1117.9477 975.5985,-1126.0263"/>
<polygon fill="#000000" stroke="#000000" points="966.2042,-1129.9955 973.6644,-1121.9582 970.81,-1128.0494 975.4158,-1126.1034 975.4158,-1126.1034 975.4158,-1126.1034 970.81,-1128.0494 977.1672,-1130.2486 966.2042,-1129.9955 966.2042,-1129.9955"/>
<text text-anchor="middle" x="979.6116" y="-1112.1549" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">leftTree, rightTree, father</text>
</g>
<!-- A3&#45;&gt;A1 -->
<g id="edge2" class="edge">
<title>A3&#45;&gt;A1</title>
<path fill="none" stroke="#000000" d="M722.4802,-1346.7297C733.2719,-1368.0268 744.441,-1390.2775 755.5092,-1412.5208"/>
<polygon fill="none" stroke="#000000" points="722.4764,-1346.7222 716.1939,-1343.1824 717.0451,-1336.0216 723.3276,-1339.5615 722.4764,-1346.7222"/>
<polygon fill="#000000" stroke="#000000" points="760.0785,-1421.7148 751.5981,-1414.7626 757.8532,-1417.2373 755.6279,-1412.7598 755.6279,-1412.7598 755.6279,-1412.7598 757.8532,-1417.2373 759.6576,-1410.757 760.0785,-1421.7148 760.0785,-1421.7148"/>
<text text-anchor="middle" x="744.4422" y="-1406.2446" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">blocks</text>
</g>
<!-- A4 -->
<g id="node5" class="node">
<title>A4</title>
<polygon fill="none" stroke="#000000" points="644,-2208 644,-2240 932,-2240 932,-2208 644,-2208"/>
<text text-anchor="start" x="775.5025" y="-2221" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">Miner</text>
<polygon fill="none" stroke="#000000" points="644,-2128 644,-2208 932,-2208 932,-2128 644,-2128"/>
<text text-anchor="start" x="760.766" y="-2189" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">#nonce:int //</text>
<text text-anchor="start" x="749.0195" y="-2177" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">工作量证明常数</text>
<text text-anchor="start" x="713.2665" y="-2165" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">#difficultyTarget:string // 难度值</text>
<text text-anchor="start" x="687.4735" y="-2153" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">&lt;u&gt;+minerSet:Miner* // 网络中所有矿工&lt;/u&gt;</text>
<text text-anchor="start" x="719.0125" y="-2141" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">#stored:Block // 矿工暂存的区块</text>
<polygon fill="none" stroke="#000000" points="644,-1880 644,-2128 932,-2128 932,-1880 644,-1880"/>
<text text-anchor="start" x="747.5885" y="-2109" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+Miner(worker:int)</text>
<text text-anchor="start" x="785.221" y="-2097" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">//</text>
<text text-anchor="start" x="745.2125" y="-2085" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">构造函数(生成地址)</text>
<text text-anchor="start" x="769.254" y="-2073" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+Miner()</text>
<text text-anchor="start" x="785.221" y="-2061" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">//</text>
<text text-anchor="start" x="727.1515" y="-2049" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">默认构造函数(不生成地址)</text>
<text text-anchor="start" x="710.444" y="-2037" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+Miner(p:Miner &amp;) // 复制构造函数</text>
<text text-anchor="start" x="715.0695" y="-2025" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+Init(worker:int):void // 地址生成器</text>
<text text-anchor="start" x="720.6285" y="-2013" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+InitPrint():void // 生成信息打印</text>
<text text-anchor="start" x="702.2085" y="-2001" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+Reset():void // 重置矿工挖矿进度</text>
<text text-anchor="start" x="672.559" y="-1989" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+Check(toCheck:Block &amp;):bool // 检查区块是否正确</text>
<text text-anchor="start" x="653.851" y="-1977" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+TestPoW(nonce:int):bool // 检查工作量证明常数是否合法</text>
<text text-anchor="start" x="723.5985" y="-1965" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+PoW():void // 工作量证明</text>
<text text-anchor="start" x="697.9515" y="-1953" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+GetNonce():int // 获得工作量证明常数</text>
<text text-anchor="start" x="667.272" y="-1941" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+Load(vec:vector&lt;Transaction&gt; &amp;):void // 装载交易</text>
<text text-anchor="start" x="710.819" y="-1929" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+GetBlock():Block // 获得暂存的区块</text>
<text text-anchor="start" x="666.0795" y="-1917" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+SetNonce(_nonce:int):void // 设置工作量证明常数</text>
<text text-anchor="start" x="659.9305" y="-1905" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">SetDifficulty(_diffucltyTarget:string):void / 设置难度值</text>
<text text-anchor="start" x="703.8785" y="-1893" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+ShowDifficulty():void // 获得难度值</text>
</g>
<!-- A4&#45;&gt;A1 -->
<g id="edge4" class="edge">
<title>A4&#45;&gt;A1</title>
<path fill="none" stroke="#000000" d="M817.6674,-1867.8259C819.078,-1858.689 820.4977,-1849.4926 821.9164,-1840.3027"/>
<polygon fill="none" stroke="#000000" points="817.6629,-1867.8558 820.7006,-1874.3959 815.832,-1879.7153 812.7943,-1873.1753 817.6629,-1867.8558"/>
<polygon fill="#000000" stroke="#000000" points="823.455,-1830.3363 826.3765,-1840.9058 822.6921,-1835.2777 821.9292,-1840.2192 821.9292,-1840.2192 821.9292,-1840.2192 822.6921,-1835.2777 817.4819,-1839.5326 823.455,-1830.3363 823.455,-1830.3363"/>
<text text-anchor="middle" x="829.0429" y="-1846.5398" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">stored</text>
</g>
<!-- A4&#45;&gt;A4 -->
<g id="edge5" class="edge">
<title>A4&#45;&gt;A4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M932.0234,-2121.3479C943.1441,-2107.7862 950,-2087.3369 950,-2060 950,-2037.7888 945.474,-2020.1244 937.8119,-2007.007"/>
<polygon fill="#000000" stroke="#000000" points="932.0234,-1998.6521 941.4174,-2004.3093 934.8709,-2002.7621 937.7185,-2006.872 937.7185,-2006.872 937.7185,-2006.872 934.8709,-2002.7621 934.0195,-2009.4348 932.0234,-1998.6521 932.0234,-1998.6521"/>
<text text-anchor="middle" x="949.294" y="-2005.738" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">minerSet</text>
</g>
<!-- A5 -->
<g id="node6" class="node">
<title>A5</title>
<polygon fill="none" stroke="#000000" points="0,-942 0,-974 422,-974 422,-942 0,-942"/>
<text text-anchor="start" x="200.7215" y="-955" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">RSA</text>
<polygon fill="none" stroke="#000000" points="0,-838 0,-942 422,-942 422,-838 0,-838"/>
<text text-anchor="start" x="169.324" y="-923" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">&#45;publicKey:BigInt //</text>
<text text-anchor="start" x="198.498" y="-911" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">公钥</text>
<text text-anchor="start" x="152.373" y="-899" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">&#45;pricateKey:BigInt // 私钥</text>
<text text-anchor="start" x="155.989" y="-887" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">&#45;Euler:BigInt // 欧拉函数</text>
<text text-anchor="start" x="161.8215" y="-875" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">&#45;product:BigInt // 乘积</text>
<text text-anchor="start" x="167.6575" y="-863" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">&#45;p:BigInt // 一个质数</text>
<text text-anchor="start" x="162.099" y="-851" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">&#45;q:BigInt // 另一个质数</text>
<polygon fill="none" stroke="#000000" points="0,-638 0,-838 422,-838 422,-638 0,-638"/>
<text text-anchor="start" x="190.3045" y="-819" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+RSA() //</text>
<text text-anchor="start" x="174.043" y="-807" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">默认构造函数</text>
<text text-anchor="start" x="9.713" y="-795" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+Init(worker:int):void // 初始化(原本使用多线程但会造成速度减慢因此残留有线程数参数)</text>
<text text-anchor="start" x="113.3475" y="-783" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+CreatePrime(worker:int):BigInt // 寻找质数</text>
<text text-anchor="start" x="119.732" y="-771" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+CreateRandom(int):BigInt // 构造随机数</text>
<text text-anchor="start" x="83.756" y="-759" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+Extgcd(BigInt, BigInt, BigInt &amp;):void // 扩展欧几里得算法</text>
<text text-anchor="start" x="125.5635" y="-747" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+CreateKeys():void // 构造公钥私钥</text>
<text text-anchor="start" x="44.45" y="-735" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+CreateRandomSmaller(BigInt &amp;):BigInt // 寻找更小的随机数(用于MR检验)</text>
<text text-anchor="start" x="111.9515" y="-723" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+EncryptByPulic(BigInt &amp;):BigInt // 公钥加密</text>
<text text-anchor="start" x="109.032" y="-711" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">EncryptByPrivate(BigInt &amp;):BigInt // 私钥加密</text>
<text text-anchor="start" x="104.727" y="-699" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+DecryptByPublic(BigInt &amp;):BigInt // 公钥解密</text>
<text text-anchor="start" x="101.6675" y="-687" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+DecryptByPrivate(BigInt &amp;):BigInt // 私钥解密</text>
<text text-anchor="start" x="31.3695" y="-675" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+EncryptAndDecrypt(BigInt &amp;, BigInt &amp;, BigInt &amp;):BigInt // 检验加密解密正确性</text>
<text text-anchor="start" x="87.645" y="-663" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+IsPrime(BigInt &amp;, k:int=4):int // MR算法判断是否为质数</text>
<text text-anchor="start" x="81.3765" y="-651" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+Sieve(vecotr&lt;BigInt&gt;, BigInt &amp;, int):int // 用小质数过筛法</text>
</g>
<!-- A5&#45;&gt;A0 -->
<g id="edge6" class="edge">
<title>A5&#45;&gt;A0</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M289.423,-637.9976C295.6191,-624.724 301.9829,-611.091 308.4356,-597.2676"/>
<polygon fill="#000000" stroke="#000000" points="312.688,-588.1579 312.5357,-599.1228 310.5731,-592.6886 308.4581,-597.2193 308.4581,-597.2193 308.4581,-597.2193 310.5731,-592.6886 304.3805,-595.3159 312.688,-588.1579 312.688,-588.1579"/>
<text text-anchor="middle" x="289.431" y="-614.9976" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">p, q, Euler, product, publicKey, privateKey</text>
</g>
<!-- A6&#45;&gt;A6 -->
<g id="edge7" class="edge">
<title>A6&#45;&gt;A6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1397.0539,-1249.8311C1408.2463,-1237.6716 1415,-1220.3945 1415,-1198 1415,-1180.1544 1410.7113,-1165.5584 1403.3054,-1154.2121"/>
<polygon fill="#000000" stroke="#000000" points="1397.0539,-1146.1689 1406.7437,-1151.3029 1400.1223,-1150.1167 1403.1907,-1154.0645 1403.1907,-1154.0645 1403.1907,-1154.0645 1400.1223,-1150.1167 1399.6377,-1156.826 1397.0539,-1146.1689 1397.0539,-1146.1689"/>
<text text-anchor="middle" x="1414.8512" y="-1152.2934" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">toBePackedTx, txPool, packedTx</text>
</g>
<!-- A7 -->
<g id="node8" class="node">
<title>A7</title>
<polygon fill="none" stroke="#000000" points="654,-906 654,-938 878,-938 878,-906 654,-906"/>
<text text-anchor="start" x="749.328" y="-919" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">TxInput</text>
<polygon fill="none" stroke="#000000" points="654,-802 654,-906 878,-906 878,-802 654,-802"/>
<text text-anchor="start" x="738.7765" y="-887" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">&#45;prevID:int //</text>
<text text-anchor="start" x="738.417" y="-875" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">前一项编号</text>
<text text-anchor="start" x="741.551" y="-863" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">&#45;value:int //</text>
<text text-anchor="start" x="743.216" y="-851" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">交易金额</text>
<text text-anchor="start" x="706.121" y="-839" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+signature:BigInt // 交易签名</text>
<text text-anchor="start" x="693.897" y="-827" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+publicKey:BigInt // 发送方公钥</text>
<text text-anchor="start" x="698.063" y="-815" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+N:BigInt // 发送方的质数乘积</text>
<polygon fill="none" stroke="#000000" points="654,-674 654,-802 878,-802 878,-674 654,-674"/>
<text text-anchor="start" x="721.959" y="-783" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+TxInput(_value:int,</text>
<text text-anchor="start" x="725.988" y="-771" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">_publicKey:BigInt,</text>
<text text-anchor="start" x="739.6065" y="-759" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">_N:BigInt) //</text>
<text text-anchor="start" x="743.2155" y="-747" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">构造函数</text>
<text text-anchor="start" x="738.911" y="-735" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+TxInput() //</text>
<text text-anchor="start" x="729.043" y="-723" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">默认构造函数</text>
<text text-anchor="start" x="681.2375" y="-711" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+GetPrevID():int // 获得前一笔交易编号</text>
<text text-anchor="start" x="693.8135" y="-699" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+GetValue():int // 获得交易金额</text>
<text text-anchor="start" x="663.9635" y="-687" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">SetPrevID(ID:int):void // 设置上一笔交易编号</text>
</g>
<!-- A6&#45;&gt;A7 -->
<g id="edge12" class="edge">
<title>A6&#45;&gt;A7</title>
<path fill="none" stroke="#000000" d="M1035.3701,-1023.5151C979.1699,-974.807 924.7686,-930.5394 878.2309,-893.5043"/>
<polygon fill="#000000" stroke="#000000" points="1035.7165,-1023.8164 1042.8689,-1024.7351 1044.7718,-1031.6906 1037.6194,-1030.7719 1035.7165,-1023.8164"/>
</g>
<!-- A8 -->
<g id="node9" class="node">
<title>A8</title>
<polygon fill="none" stroke="#000000" points="1073,-858 1073,-890 1370,-890 1370,-858 1073,-858"/>
<text text-anchor="start" x="1200.9385" y="-871" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">TxOutput</text>
<polygon fill="none" stroke="#000000" points="1073,-802 1073,-858 1370,-858 1370,-802 1073,-802"/>
<text text-anchor="start" x="1197.051" y="-839" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">&#45;value:int //</text>
<text text-anchor="start" x="1198.716" y="-827" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">交易金额</text>
<text text-anchor="start" x="1139.915" y="-815" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">&#45;publicHash:string // 接收方公钥哈希</text>
<polygon fill="none" stroke="#000000" points="1073,-722 1073,-802 1370,-802 1370,-722 1073,-722"/>
<text text-anchor="start" x="1190.5215" y="-783" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+TxOutput() //</text>
<text text-anchor="start" x="1184.543" y="-771" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">默认构造函数</text>
<text text-anchor="start" x="1082.7235" y="-759" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+TxOutput(_value:int, _receiverPublicHash:string) // 构造函数</text>
<text text-anchor="start" x="1132.096" y="-747" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+GetPublicHash():string // 获得公钥哈希</text>
<text text-anchor="start" x="1149.3135" y="-735" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+GetValue():int // 获得交易金额</text>
</g>
<!-- A6&#45;&gt;A8 -->
<g id="edge13" class="edge">
<title>A6&#45;&gt;A8</title>
<path fill="none" stroke="#000000" d="M1221,-1011.5104C1221,-968.9832 1221,-925.8576 1221,-890.1672"/>
<polygon fill="#000000" stroke="#000000" points="1221.0001,-1011.7802 1225,-1017.7803 1221,-1023.7802 1217,-1017.7802 1221.0001,-1011.7802"/>
</g>
<!-- A7&#45;&gt;A0 -->
<g id="edge8" class="edge">
<title>A7&#45;&gt;A0</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M684.4167,-673.8145C669.5657,-649.7521 653.5283,-623.7673 637.0544,-597.0755"/>
<polygon fill="#000000" stroke="#000000" points="631.6913,-588.386 640.7729,-594.5323 634.3174,-592.6409 636.9435,-596.8957 636.9435,-596.8957 636.9435,-596.8957 634.3174,-592.6409 633.1141,-599.2592 631.6913,-588.386 631.6913,-588.386"/>
<text text-anchor="middle" x="648.4041" y="-596.3716" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">signature, publicKey, N</text>
</g>
<!-- A9 -->
<g id="node10" class="node">
<title>A9</title>
<polygon fill="none" stroke="#000000" points="305,-2690 305,-2722 793,-2722 793,-2690 305,-2690"/>
<text text-anchor="start" x="535.113" y="-2703" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">Wallet</text>
<polygon fill="none" stroke="#000000" points="305,-2550 305,-2690 793,-2690 793,-2550 305,-2550"/>
<text text-anchor="start" x="473.1515" y="-2671" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">#publicKeyHash:string // 公钥哈希</text>
<text text-anchor="start" x="500.931" y="-2659" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">#address:string // 地址</text>
<text text-anchor="start" x="497.7975" y="-2647" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">#version:string // 版本号</text>
<text text-anchor="start" x="489.258" y="-2635" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">#privateKey:BigInt // 私钥</text>
<text text-anchor="start" x="492.3175" y="-2623" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">#publicKey:BigInt // 公钥</text>
<text text-anchor="start" x="503.427" y="-2611" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">#n:BigInt // 大数乘积</text>
<text text-anchor="start" x="484.5415" y="-2599" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">#chain:Chain // 保存的区块链</text>
<text text-anchor="start" x="336.047" y="-2587" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">&lt;u&gt;+walletInfo:vector&lt;pair&lt;string, string&gt;&gt; // 钱包信息(前一项为地址，后一项为公钥哈希)&lt;/u&gt;</text>
<text text-anchor="start" x="443.823" y="-2575" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">&lt;u&gt;+walletSet:vector&lt;Wallet&gt; // 钱包集合&lt;/u&gt;</text>
<text text-anchor="start" x="353.6415" y="-2563" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">&lt;u&gt;+onlyWalletSet:vector&lt;Wallet&gt; // 除去矿工的钱包集合(矿工也在钱包集合中)&lt;/u&gt;</text>
<polygon fill="none" stroke="#000000" points="305,-2290 305,-2550 793,-2550 793,-2290 305,-2290"/>
<text text-anchor="start" x="507.199" y="-2531" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+Wallet(worker:int)</text>
<text text-anchor="start" x="546.221" y="-2519" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">//</text>
<text text-anchor="start" x="488.4305" y="-2507" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">构造函数(生成公钥私钥)</text>
<text text-anchor="start" x="387.4355" y="-2495" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+Wallet() // 默认构造函数(暂用钱包不生成公钥私钥，不进入集合)</text>
<text text-anchor="start" x="443.011" y="-2483" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+Init(worker:int):void // 生成公钥私钥(虚函数)</text>
<text text-anchor="start" x="455.235" y="-2471" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+InitPrint():void // 打印初始化信息(虚函数)</text>
<text text-anchor="start" x="421.24" y="-2459" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+GetKey():turple&lt;BigInt, BigInt, string&gt; // 获得公钥私钥</text>
<text text-anchor="start" x="478.7615" y="-2447" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+GetAddress():string // 获得地址</text>
<text text-anchor="start" x="342.423" y="-2435" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+SetWallet(_publicKey:BigInt, _privatekey:BigInt, _N: BigInt, _addr:string):void // 设置钱包</text>
<text text-anchor="start" x="375.2195" y="-2423" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+CheckChain():bool // 检查区块链是否正确，若不正确返回错误交易信息</text>
<text text-anchor="start" x="321.033" y="-2411" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+CreateTransaction(receiverInfo:pair&lt;string, string&gt;, _value:int):bool // 创建交易，若创建成功返回true</text>
<text text-anchor="start" x="405.2145" y="-2399" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+CreateCoinbase(x:int):void // 创建自定义金额的系统奖励交易</text>
<text text-anchor="start" x="431.8825" y="-2387" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+CreateCoinbase():void / 创建默认的系统奖励交易</text>
<text text-anchor="start" x="388.003" y="-2375" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+Sign(tx:Transaction &amp;, receiverPublicKeyHash:string, val:int):void // 签名</text>
<text text-anchor="start" x="367.144" y="-2363" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+FindSpent(pool:vector&lt;Transaction &amp;&gt;):vector&lt;int&gt; // 寻找与钱包相关联的UXTO</text>
<text text-anchor="start" x="314.7945" y="-2351" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+FindUTXO(spentTxId:vector&lt;int&gt; &amp;, pool:vector&lt;Transaction&gt; &amp;):vector&lt;Transaction&gt; // 选择可用UTXO</text>
<text text-anchor="start" x="471.341" y="-2339" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+FindBalance():int* // 查询余额</text>
<text text-anchor="start" x="462.0925" y="-2327" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+GetChain():Chain // 获得存储的区块链</text>
<text text-anchor="start" x="433.8385" y="-2315" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">+SetChain(newChain:Chain &amp;):void // 设置区块链</text>
<text text-anchor="start" x="421.613" y="-2303" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000"> &lt;u&gt;+VerifyTx(_tx:Transaction &amp;):bool // 检验交易正确性</text>
</g>
<!-- A9&#45;&gt;A0 -->
<g id="edge9" class="edge">
<title>A9&#45;&gt;A0</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M511.0071,-2289.7761C483.0886,-2112.1058 450,-1853.5375 450,-1626 450,-1626 450,-1626 450,-1198 450,-998.2424 450,-773.6557 450,-598.3077"/>
<polygon fill="#000000" stroke="#000000" points="450,-588.1521 454.5001,-598.152 450,-593.1521 450.0001,-598.1521 450.0001,-598.1521 450.0001,-598.1521 450,-593.1521 445.5001,-598.1521 450,-588.1521 450,-588.1521"/>
<text text-anchor="middle" x="458.4524" y="-603.2782" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">pricateKey, publicKey, n</text>
</g>
<!-- A9&#45;&gt;A3 -->
<g id="edge16" class="edge">
<title>A9&#45;&gt;A3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M533.8075,-2289.8172C522.7689,-2069.7515 517.4366,-1719.5983 568,-1422 572.2582,-1396.9376 578.8018,-1370.8601 586.2723,-1345.7331"/>
<polygon fill="#000000" stroke="#000000" points="589.1779,-1336.1536 590.5815,-1347.0293 587.7266,-1340.9383 586.2752,-1345.7231 586.2752,-1345.7231 586.2752,-1345.7231 587.7266,-1340.9383 581.969,-1344.4168 589.1779,-1336.1536 589.1779,-1336.1536"/>
<text text-anchor="middle" x="592.0051" y="-1352.9527" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">chain</text>
</g>
<!-- A9&#45;&gt;A4 -->
<g id="edge10" class="edge">
<title>A9&#45;&gt;A4</title>
<path fill="none" stroke="#000000" d="M669.6388,-2280.8748C676.9655,-2267.2024 684.2865,-2253.5407 691.4916,-2240.0952"/>
<polygon fill="none" stroke="#000000" points="666.4629,-2279.3915 664.8245,-2289.8589 672.6328,-2282.6979 666.4629,-2279.3915"/>
</g>
<!-- A9&#45;&gt;A9 -->
<g id="edge17" class="edge">
<title>A9&#45;&gt;A9</title>
<path fill="none" stroke="#000000" d="M800.366,-2548.1887C807.172,-2536.5695 811,-2522.5065 811,-2506 811,-2488.6513 806.7714,-2474.0019 799.3012,-2462.0519"/>
<polygon fill="none" stroke="#000000" points="800.2334,-2548.3762 800.0336,-2555.5845 793.3028,-2558.1725 793.5027,-2550.9641 800.2334,-2548.3762"/>
<polygon fill="#000000" stroke="#000000" points="793.3028,-2453.8275 802.8312,-2459.2553 796.2492,-2457.8673 799.1955,-2461.907 799.1955,-2461.907 799.1955,-2461.907 796.2492,-2457.8673 795.5597,-2464.5587 793.3028,-2453.8275 793.3028,-2453.8275"/>
<text text-anchor="middle" x="810.8129" y="-2460.4918" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">onlyWalletSet, walletSet</text>
</g>
</g>
</svg>
