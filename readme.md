# 区块链实现

说明：*表示操作，否则表示数据



## 交易

### p2p交易网络

1. public:
   1. 公钥
   2. 交易记录（加密）
2. 普通节点：
   1. 信息（私钥）
   2. *查询交易记录
   3. *生成交易记录
3. 矿工节点（继承普通节点）：
   1. *计算区块（PoW）
   2. *验证区块



## 区块链

### 区块链

1. 区块
2. *查询主链
3. *查询余额（?）



### 区块



#### 区块头

| 字段             | 大小   | 描述                             |
| ---------------- | ------ | -------------------------------- |
| version          | 4字节  | 版本号，⽤于跟踪软件/协议的更新  |
| prevBlockHash    | 32字节 | 上一个区块的Hash地址             |
| merkleRoot       | 32字节 | 该区块中交易的merkle树根的哈希值 |
| time             | 4字节  | 该区块的创建时间戳               |
| difficultyTarget | 4字节  | 该区块链工作量证明难度目标       |
| nonce            | 4字节  | 用于证明工作量的计算参数         |



#### 区块体

| 字段                 | 大小      | 描述                   |
| -------------------- | --------- | ---------------------- |
| numTransactionsBytes | 1字节     | 交易数量占用的字节数   |
| numTransactions      | 0-8个字节 | 区块内存储的交易数量   |
| transactions         | 不确定    | 区块内存的多个交易数据 |